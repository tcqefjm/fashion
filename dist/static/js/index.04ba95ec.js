(function(t){function e(e){for(var r,o,l=e[0],a=e[1],c=e[2],h=0,d=[];h<l.length;h++)o=l[h],n[o]&&d.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],r=!0,l=1;l<i.length;l++){var a=i[l];0!==n[a]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var r={},n={index:0},s=[];function o(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=r,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=a;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"1beb":function(t,e,i){t.exports=i.p+"static/img/flask-logo.c11729f2.png"},"2c09":function(t,e,i){t.exports=i.p+"static/img/vue-logo.feb3283a.png"},"4d68":function(t,e,i){"use strict";var r=i("92b0"),n=i.n(r);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var r=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"nav"}},[i("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),i("router-link",{attrs:{to:"/gallery"}},[t._v("Gallery")])],1),t._m(0),i("router-view")],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"logos"}},[r("p",[r("img",{attrs:{src:i("2c09")}}),r("span",{attrs:{id:"plus"}},[t._v("+")]),r("img",{attrs:{src:i("1beb")}})])])}],o=(i("5c0b"),i("2877")),l={},a=Object(o["a"])(l,n,s,!1,null,null,null),c=a.exports,u=i("8c4f"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js + Flask App"}})],1)},d=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v(t._s(t.msg))]),t._m(0),i("h3",[t._v("Installed CLI Plugins")]),t._m(1),i("h3",[t._v("Essential Links")]),t._m(2),i("h3",[t._v("Ecosystem")]),t._m(3)])},g=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("\n    For guide and recipes on how to configure / customize this project,"),i("br"),t._v("\n    check out the\n    "),i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/docs",target:"_blank"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank"}},[t._v("babel")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),i("li",[i("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://router.vuejs.org/en/essentials/getting-started.html",target:"_blank"}},[t._v("vue-router")])]),i("li",[i("a",{attrs:{href:"https://vuex.vuejs.org/en/intro.html",target:"_blank"}},[t._v("vuex")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank"}},[t._v("vue-devtools")])]),i("li",[i("a",{attrs:{href:"https://vue-loader.vuejs.org/en",target:"_blank"}},[t._v("vue-loader")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}],p={name:"HelloWorld",props:{msg:String}},v=p,m=(i("4d68"),Object(o["a"])(v,f,g,!1,null,"5394a2a7",null)),_=m.exports,b={name:"home",components:{HelloWorld:_}},y=b,w=Object(o["a"])(y,h,d,!1,null,null,null),x=w.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"gallery"}},[i("Waterfall",{ref:"waterfall",attrs:{gap:24,imgsArr:t.imgsArr,imgWidth:280,maxCols:4,isLogin:t.isLogin},on:{scrollReachBottom:t.getData}})],1)},k=[],E=i("bc3a"),$=i.n(E),C=$.a.create({baseURL:"/api/",timeout:5e3,headers:{"Content-Type":"application/json"}});C.interceptors.request.use(function(t){return t.headers["Authorization"]="Fake Token",t}),C.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var L={fetchPersonal:function(){return C.get("/user/personal").then(function(t){return t.data})},getLoginInfo:function(){return C.get("/user/info").then(function(t){return t.data})}},j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-waterfall-container",style:{width:t.width&&!t.isMobile?t.width+"px":"",height:parseFloat(t.height)==t.height?t.height+"px":t.height}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:t.isFirstLoad}},[t._t("loading",null,{isFirstLoad:t.isFirstLoad}),t._l(t.loadingDotCount,function(e){return t.hasLoadingSlot?t._e():i("div",{key:e,staticClass:"dot",style:t.loadingDotStyle})})],2),i("div",{ref:"scrollEl",staticClass:"vue-waterfall-scroll"},[t._t("waterfall-head"),i("div",{staticClass:"vue-waterfall",style:t.isMobile?"":{width:t.colWidth*t.cols+"px",left:"50%",marginLeft:-1*t.colWidth*t.cols/2+"px"}},[t._l(t.imgsArr_c,function(e,r){return i("div",{staticClass:"img-box",class:[t.cardAnimationClass,{__err__:e._error}],style:{padding:(t.isMobile?t.mobileGap:t.gap)/2+"px",width:t.isMobile?"":t.colWidth+"px"}},[e[t.srcKey]?i("a",{staticClass:"img-inner-box",style:{width:t.imgWidth_c+"px",height:!!e._height&&e._height+"px"}},[i("el-popover",{ref:"popover-"+r,refInFor:!0,attrs:{placement:"top",width:"360"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e["src"]},on:{click:function(e){t.$refs["popover-"+r][0].doClose()}}}),t.isLogin?i("el-button",{staticStyle:{position:"absolute",bottom:"20px",left:"170px"},attrs:{type:"primary",icon:"el-icon-check",circle:""},on:{click:function(i){t.$refs["popover-"+r][0].$slots.default[0].elm.src=-1!==t.$refs["popover-"+r][0].$slots.default[0].elm.src.indexOf(e["src"])?e["swap"]:e["src"]}}}):t._e(),i("img",{attrs:{slot:"reference",src:e[t.srcKey]},slot:"reference"})],1)],1):t._e()])}),t.over?i("div",{ref:"over",staticClass:"over"},[t._t("waterfall-over",[t._v("展示全部")])],2):t._e()],2)],2)])},P=[],O=(i("ac6a"),i("4917"),i("c5f6"),{name:"Waterfall",props:{width:{type:Number},height:{type:[Number,String]},reachBottomDistance:{type:Number,default:20},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500},cardAnimationClass:{type:[String],default:"default-card-animation"},enablePullDownEvent:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},data:function(){return{msg:"this is from vue-waterfall.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0,over:!1}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var t=this;this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",function(){t.isFirstLoad=!1,t.imgsArr_c=t.imgsArr.concat([]),t.$nextTick(function(){t.isPreloading=!1,t.imgBoxEls=t.$el.getElementsByClassName("img-box"),t.waterfall()})}),this.isMobile||this.width||this.response(),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()},watch:{isPreloading:function(t,e){var i=this;t?setTimeout(function(){i.isPreloading&&(i.isPreloading_c=!0)},this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(t,e){(this.imgsArr_c.length>t.length||this.imgsArr_c.length>0&&t[0]&&!t[0]._height)&&this.reset(),this.preload()}},methods:{preload:function(t,e){var i=this;this.imgsArr.forEach(function(t,e){if(!(e<i.loadedCount)){if(!t[i.srcKey])return i.imgsArr[e]._height="0",i.loadedCount++,void(i.loadedCount===i.imgsArr.length&&i.$emit("preloaded"));var r=new Image;r.src=t[i.srcKey],r.onload=r.onerror=function(t){i.loadedCount++,i.imgsArr[e]._height="load"===t.type?Math.round(i.imgWidth_c/(r.width/r.height)):i.isMobile?i.imgWidth_c:i.imgWidth,"error"===t.type&&(i.imgsArr[e]._error=!0,i.$emit("imgError",i.imgsArr[e])),i.loadedCount===i.imgsArr.length&&i.$emit("preloaded")}}})},calcuCols:function(){var t=this.width?this.width:window.innerWidth,e=parseInt(t/this.colWidth);return e=0===e?1:e,this.isMobile?2:e>this.maxCols?this.maxCols:e},waterfall:function(){if(this.imgBoxEls){var t,e,i,r=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0===this.beginIndex&&(this.colsHeightArr=[]);for(var n=this.beginIndex;n<this.imgsArr.length;n++){if(!this.imgBoxEls[n])return;if(i=this.imgBoxEls[n].offsetHeight,n<this.cols)this.colsHeightArr.push(i),t=0,e=n*r;else{var s=Math.min.apply(null,this.colsHeightArr),o=this.colsHeightArr.indexOf(s);t=s,e=o*r,this.colsHeightArr[o]=s+i}this.imgBoxEls[n].style.left=e+"px",this.imgBoxEls[n].style.top=t+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var t=this;window.addEventListener("resize",function(){var e=t.cols;t.cols=t.calcuCols(),e!==t.cols&&(t.beginIndex=0,t.waterfall(),t.over&&t.setOverTipPos())})},scrollFn:function(){var t=this.$refs.scrollEl;if(!this.isPreloading){var e=Math.min.apply(null,this.colsHeightArr);t.scrollTop+t.offsetHeight>e-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))}},scroll:function(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},waterfallOver:function(){this.$refs.scrollEl.removeEventListener("scroll",this.scrollFn),this.isPreloading=!1,this.over=!0,this.setOverTipPos()},setOverTipPos:function(){var t=this,e=Math.max.apply(null,this.colsHeightArr);this.$nextTick(function(){t.$refs.over.style.top=e+"px"})},bindClickEvent:function(){var t=this;this.$el.querySelector(".vue-waterfall").addEventListener("click",function(e){var i=e.target;if(-1===e.target.className.indexOf("over")&&-1===i.className.indexOf("img-box")){while(-1===i.className.indexOf("img-inner-box"))i=i.parentNode;var r=i.getAttribute("data-index");t.$emit("click",e,{index:r,value:t.imgsArr_c[r]})}})},pullDown:function(){var t,e=this,i=this.$el.querySelector(".vue-waterfall-scroll");i.addEventListener("touchmove",function(r){if(0===i.scrollTop){var n=r.changedTouches[0];t||(t=n.pageY);var s=n.pageY-t;s>0&&r.preventDefault(),e.$emit("pullDownMove",s)}}),i.addEventListener("touchend",function(r){0===i.scrollTop&&(t=NaN,e.$emit("pullDownEnd"))})},loadingMiddle:function(){var t=this.$el.querySelector(".vue-waterfall-scroll"),e=t.offsetWidth-t.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-e/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0,this.scroll(),this.over=!1}}}),W=O,S=(i("7060"),Object(o["a"])(W,j,P,!1,null,"446768ae",null)),M=S.exports,N={name:"gallery",data:function(){return{imgsArr:[],group:0,isLogin:!1}},components:{Waterfall:M},methods:{getData:function(){var t=this;L.fetchPersonal().then(function(e){t.group++,5!==t.group?(e=e.map(function(t){return{src:"/api/images/"+t["key"],swap:"/api/faceswap/"+t["key"]}}),t.imgsArr=t.imgsArr.concat(e)):t.$refs.waterfall.waterfallOver()})},getLoginInfo:function(){var t=this;L.getLoginInfo().then(function(e){t.isLogin=e["isLogin"]})}},created:function(){this.getData(),this.getLoginInfo()}},T=N,D=(i("b9d2"),Object(o["a"])(T,A,k,!1,null,null,null)),B=D.exports;r["default"].use(u["a"]);var F=new u["a"]({routes:[{path:"/",name:"home",component:x},{path:"/gallery",name:"gallery",component:B}]}),I=i("2f62");r["default"].use(I["a"]);var H=new I["a"].Store({state:{},mutations:{},actions:{}}),q=(i("98fc"),i("5c96")),K=i.n(q);i("0fae");r["default"].use(K.a),r["default"].config.productionTip=!1,new r["default"]({router:F,store:H,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var r=i("5e27"),n=i.n(r);n.a},"5e27":function(t,e,i){},6314:function(t,e,i){},7060:function(t,e,i){"use strict";var r=i("a56e"),n=i.n(r);n.a},"92b0":function(t,e,i){},"98fc":function(t,e){},a56e:function(t,e,i){},b9d2:function(t,e,i){"use strict";var r=i("6314"),n=i.n(r);n.a}});
//# sourceMappingURL=index.04ba95ec.js.map