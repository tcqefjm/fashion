(function(t){function e(e){for(var r,n,a=e[0],l=e[1],c=e[2],d=0,h=[];d<a.length;d++)n=a[d],s[n]&&h.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],r=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(r=!1)}r&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var r={},s={index:0},o=[];function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"073a":function(t,e,i){"use strict";var r=i("c932"),s=i.n(r);s.a},"134c":function(t,e,i){},"379d":function(t,e,i){t.exports=i.p+"static/img/face.54b6ae00.png"},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var r=i("2b0e"),s=i("5c96"),o=i.n(s),n=(i("0fae"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)}),a=[],l=(i("5c0b"),i("2877")),c={},u=Object(l["a"])(c,n,a,!1,null,null,null),d=u.exports,h=i("8c4f"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-header",[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.$route.path,mode:"horizontal",router:"true"}},[t.isLogout?i("el-menu-item",{attrs:{index:"/login"}},[i("i",{staticClass:"el-icon-share"}),t._v("用户登录")]):t._e(),t.isLogin?i("el-submenu",[i("template",{slot:"title"},[i("span",{staticClass:"submenu-title"},[i("i",{staticClass:"el-icon-user-solid"}),t._v(t._s(t.username))])]),i("el-menu-item",{on:{click:t.Logout}},[t._v("退出")])],2):t._e(),i("el-menu-item",{attrs:{index:"/view"}},[i("i",{staticClass:"el-icon-edit"}),t._v("预览图片")]),i("el-menu-item",{attrs:{index:"/"}},[i("i",{staticClass:"el-icon-delete"}),t._v("项目介绍")])],1)],1),i("el-main",[i("router-view")],1)],1)},g=[],p=i("bc3a"),m=i.n(p),v=m.a.create({baseURL:"/api/",timeout:5e3,headers:{"Content-Type":"application/json"}});v.interceptors.request.use(function(t){return t.headers["Authorization"]="Fake Token",t}),v.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var b={fetchPersonal:function(){return v.get("/user/personal").then(function(t){return t.data})},getLoginInfo:function(){return v.get("/user/info").then(function(t){return t.data})},logoutUser:function(){return v.get("/user/logout").then(function(t){return t.data})},loginUser:function(t){return v.post("/user/login",t).then(function(t){return t.data})},registerUser:function(t){return v.post("/user/register",t).then(function(t){return t.data})}},w={data:function(){return{activeIndex:"1",activeIndex2:"1",isLogin:!1,isLogout:!0,username:""}},methods:{Logout:function(){b.logoutUser().then(function(t){"Success"===t.status&&this.$router.push({path:"/"})})},getLoginInfo:function(){var t=this;b.getLoginInfo().then(function(e){t.isLogin=e["isLogin"],t.isLogout=!t.isLogin,t.isLogin?t.username="Hello,"+e["user"]:t.username="用户登录"})}},mounted:function(){this.getLoginInfo()}},y=w,x=(i("073a"),Object(l["a"])(y,f,g,!1,null,"6eb8c52e",null)),_=x.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("div",{staticClass:"intro-div"},[i("div",{staticClass:"intro-text"},[i("h1",{staticStyle:{"font-size":"2.5em"}},[t._v("智能时尚搭配系统")]),i("br"),i("h1",{staticStyle:{"font-size":"1.6em"}},[t._v("一两句说明")])]),i("div",{staticClass:"start-button"},[t.isLogin?i("el-button",{attrs:{type:"primary",round:""},on:{click:t.gotoview}},[t._v("开始使用")]):t._e(),t.isLogout?i("el-button",{attrs:{type:"primary",round:""},on:{click:t.gotologin}},[t._v("先登陆哟")]):t._e()],1)]),i("div",{staticClass:"image-div"},[i("el-image",{staticStyle:{width:"300px",height:"350px"},attrs:{src:t.imageurl}})],1)])},C=[],F={data:function(){return{imageurl:i("379d"),isLogin:!1,isLogout:!0}},methods:{loginjudge:function(){var t=this;b.getLoginInfo().then(function(e){t.isLogin=e["isLogin"],t.isLogout=!t.isLogin})},gotologin:function(){this.$router.push({path:"/login"})},gotoview:function(){this.$router.push({path:"/view"})}},created:function(){this.loginjudge()}},$=F,A=(i("93a8"),Object(l["a"])($,L,C,!1,null,"b3b1e0b2",null)),k=A.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"gallery"}},[i("waterfall",{ref:"waterfall",attrs:{gap:24,imgsArr:t.imgsArr,imgWidth:280,maxCols:4,isLogin:t.isLogin},on:{scrollReachBottom:t.getData}})],1)},E=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-waterfall-container",style:{width:t.width&&!t.isMobile?t.width+"px":"",height:parseFloat(t.height)==t.height?t.height+"px":t.height}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:t.isFirstLoad}},[t._t("loading",null,{isFirstLoad:t.isFirstLoad}),t._l(t.loadingDotCount,function(e){return t.hasLoadingSlot?t._e():i("div",{key:e,staticClass:"dot",style:t.loadingDotStyle})})],2),i("div",{ref:"scrollEl",staticClass:"vue-waterfall-scroll"},[t._t("waterfall-head"),i("div",{staticClass:"vue-waterfall",style:t.isMobile?"":{width:t.colWidth*t.cols+"px",left:"50%",marginLeft:-1*t.colWidth*t.cols/2+"px"}},[t._l(t.imgsArr_c,function(e,r){return i("div",{staticClass:"img-box",class:[t.cardAnimationClass,{__err__:e._error}],style:{padding:(t.isMobile?t.mobileGap:t.gap)/2+"px",width:t.isMobile?"":t.colWidth+"px"}},[e[t.srcKey]?i("a",{staticClass:"img-inner-box",style:{width:t.imgWidth_c+"px",height:!!e._height&&e._height+"px"}},[i("el-popover",{ref:"popover-"+r,refInFor:!0,attrs:{placement:"top",width:"360"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e["src"]},on:{click:function(e){t.$refs["popover-"+r][0].doClose()}}}),t.isLogin?i("el-button",{staticStyle:{position:"absolute",bottom:"20px",left:"170px"},attrs:{type:"primary",icon:"el-icon-magic-stick",circle:""},on:{click:function(i){t.$refs["popover-"+r][0].$slots.default[0].elm.src=-1!==t.$refs["popover-"+r][0].$slots.default[0].elm.src.indexOf(e["src"])?e["swap"]:e["src"]}}}):t._e(),i("img",{staticClass:"small-img",attrs:{slot:"reference",src:e[t.srcKey]},slot:"reference"})],1)],1):t._e()])}),t.over?i("div",{ref:"over",staticClass:"over"},[t._t("waterfall-over",[t._v("展示全部")])],2):t._e()],2)],2)])},O=[],j=(i("ac6a"),i("4917"),i("c5f6"),{name:"Waterfall",props:{width:{type:Number},height:{type:[Number,String]},reachBottomDistance:{type:Number,default:20},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500},cardAnimationClass:{type:[String],default:"default-card-animation"},enablePullDownEvent:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},data:function(){return{msg:"this is from vue-waterfall.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0,over:!1}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var t=this;this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",function(){t.isFirstLoad=!1,t.imgsArr_c=t.imgsArr.concat([]),t.$nextTick(function(){t.isPreloading=!1,t.imgBoxEls=t.$el.getElementsByClassName("img-box"),t.waterfall()})}),this.isMobile||this.width||this.response(),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()},watch:{isPreloading:function(t,e){var i=this;t?setTimeout(function(){i.isPreloading&&(i.isPreloading_c=!0)},this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(t,e){(this.imgsArr_c.length>t.length||this.imgsArr_c.length>0&&t[0]&&!t[0]._height)&&this.reset(),this.preload()}},methods:{preload:function(t,e){var i=this;this.imgsArr.forEach(function(t,e){if(!(e<i.loadedCount)){if(!t[i.srcKey])return i.imgsArr[e]._height="0",i.loadedCount++,void(i.loadedCount===i.imgsArr.length&&i.$emit("preloaded"));var r=new Image;r.src=t[i.srcKey],r.onload=r.onerror=function(t){i.loadedCount++,i.imgsArr[e]._height="load"===t.type?Math.round(i.imgWidth_c/(r.width/r.height)):i.isMobile?i.imgWidth_c:i.imgWidth,"error"===t.type&&(i.imgsArr[e]._error=!0,i.$emit("imgError",i.imgsArr[e])),i.loadedCount===i.imgsArr.length&&i.$emit("preloaded")}}})},calcuCols:function(){var t=this.width?this.width:window.innerWidth,e=parseInt(t/this.colWidth);return e=0===e?1:e,this.isMobile?2:e>this.maxCols?this.maxCols:e},waterfall:function(){if(this.imgBoxEls){var t,e,i,r=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0===this.beginIndex&&(this.colsHeightArr=[]);for(var s=this.beginIndex;s<this.imgsArr.length;s++){if(!this.imgBoxEls[s])return;if(i=this.imgBoxEls[s].offsetHeight,s<this.cols)this.colsHeightArr.push(i),t=0,e=s*r;else{var o=Math.min.apply(null,this.colsHeightArr),n=this.colsHeightArr.indexOf(o);t=o,e=n*r,this.colsHeightArr[n]=o+i}this.imgBoxEls[s].style.left=e+"px",this.imgBoxEls[s].style.top=t+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var t=this;window.addEventListener("resize",function(){var e=t.cols;t.cols=t.calcuCols(),e!==t.cols&&(t.beginIndex=0,t.waterfall(),t.over&&t.setOverTipPos())})},scrollFn:function(){var t=this.$refs.scrollEl;if(!this.isPreloading){var e=Math.min.apply(null,this.colsHeightArr);t.scrollTop+t.offsetHeight>e-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))}},scroll:function(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},waterfallOver:function(){this.$refs.scrollEl.removeEventListener("scroll",this.scrollFn),this.isPreloading=!1,this.over=!0,this.setOverTipPos()},setOverTipPos:function(){var t=this,e=Math.max.apply(null,this.colsHeightArr);this.$nextTick(function(){t.$refs.over.style.top=e+"px"})},bindClickEvent:function(){var t=this;this.$el.querySelector(".vue-waterfall").addEventListener("click",function(e){var i=e.target;if(-1===e.target.className.indexOf("over")&&-1===i.className.indexOf("img-box")){while(-1===i.className.indexOf("img-inner-box"))i=i.parentNode;var r=i.getAttribute("data-index");t.$emit("click",e,{index:r,value:t.imgsArr_c[r]})}})},pullDown:function(){var t,e=this,i=this.$el.querySelector(".vue-waterfall-scroll");i.addEventListener("touchmove",function(r){if(0===i.scrollTop){var s=r.changedTouches[0];t||(t=s.pageY);var o=s.pageY-t;o>0&&r.preventDefault(),e.$emit("pullDownMove",o)}}),i.addEventListener("touchend",function(r){0===i.scrollTop&&(t=NaN,e.$emit("pullDownEnd"))})},loadingMiddle:function(){var t=this.$el.querySelector(".vue-waterfall-scroll"),e=t.offsetWidth-t.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-e/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0,this.scroll(),this.over=!1}}}),M=j,W=(i("9238"),Object(l["a"])(M,S,O,!1,null,"8c527f92",null)),I=W.exports,N={name:"gallery",data:function(){return{imgsArr:[],group:0,isLogin:!1}},components:{waterfall:I},methods:{getData:function(){var t=this;b.fetchPersonal().then(function(e){5!==t.group?(t.group++,e=e.map(function(t){return{src:"/api/images/"+t["key"],swap:"/api/faceswap/"+t["key"]}}),t.imgsArr=t.imgsArr.concat(e)):t.$refs.waterfall.waterfallOver()})},getLoginInfo:function(){var t=this;b.getLoginInfo().then(function(e){t.isLogin=e["isLogin"]})}},created:function(){this.getData(),this.getLoginInfo()}},U=N,D=(i("92af"),Object(l["a"])(U,P,E,!1,null,"6b092efd",null)),T=D.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-container"},[i("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{model:t.ruleForm2,rules:t.rules2,"status-icon":"","label-position":"left","label-width":"0px"}},[i("h3",{staticClass:"title"},[t._v("登陆界面")]),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:t.ruleForm2.username,callback:function(e){t.$set(t.ruleForm2,"username",e)},expression:"ruleForm2.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:t.ruleForm2.password,callback:function(e){t.$set(t.ruleForm2,"password",e)},expression:"ruleForm2.password"}})],1),i("br"),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"45%",float:"left"},attrs:{type:"primary",loading:t.logining},on:{click:t.handleSubmit}},[t._v("登录")]),i("el-button",{staticStyle:{width:"45%",float:"right"},attrs:{type:"primary"},on:{click:t.gotoReg}},[t._v("注册")])],1)],1)],1)},H=[],R={data:function(){return{logining:!1,ruleForm2:{username:"",password:""},rules2:{username:[{required:!0,message:"请输入你的用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!1}},methods:{handleSubmit:function(t){var e=this,i=this;this.$refs.ruleForm2.validate(function(t){if(!t)return!1;var r=new FormData;r.append("user",e.ruleForm2.username),r.append("pass",e.ruleForm2.password),b.loginUser(r).then(function(t){"Success"===t.status?i.$router.push({path:"/view"}):alert("Username or Password wrong!")})})},gotoReg:function(){this.$router.push({path:"/register"})}}},q=R,K=(i("cc07"),Object(l["a"])(q,B,H,!1,null,"ccf3e548",null)),z=K.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reg-div"},[i("div",{staticClass:"register-wrapper"},[i("div",{attrs:{id:"register"}},[i("p",{staticClass:"title"},[t._v("注册界面")]),i("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"status-icon":"",rules:t.rules2,"label-width":"0"}},[i("el-form-item",{attrs:{prop:"file"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入用户名"},model:{value:t.ruleForm2.username,callback:function(e){t.$set(t.ruleForm2,"username",e)},expression:"ruleForm2.username"}})],1),i("el-form-item",{attrs:{prop:"pass"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"输入密码"},model:{value:t.ruleForm2.pass,callback:function(e){t.$set(t.ruleForm2,"pass",e)},expression:"ruleForm2.pass"}})],1),i("el-form-item",{attrs:{prop:"checkPass"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"确认密码"},model:{value:t.ruleForm2.checkPass,callback:function(e){t.$set(t.ruleForm2,"checkPass",e)},expression:"ruleForm2.checkPass"}})],1),i("el-form-item",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm2")}}},[t._v("注册")]),i("p",{staticClass:"login",on:{click:t.gotoLogin}},[t._v("已有账号？立即登录")])],1)],1)],1)])])},J=[],Y={data:function(){var t=this,e=function(t,e,i){""===e?i(new Error("用户名不能为空")):i()},i=function(e,i,r){""===i?r(new Error("请输入密码")):(""!==t.ruleForm2.checkPass&&t.$refs.ruleForm2.validateField("checkPass"),r())},r=function(e,i,r){""===i?r(new Error("请再次输入密码")):i!==t.ruleForm2.pass?r(new Error("两次输入密码不一致!")):r()};return{ruleForm2:{pass:"",checkPass:"",file:"",username:""},rules2:{pass:[{validator:i,trigger:"change"}],checkPass:[{validator:r,trigger:"change"}],username:[{validator:e,trigger:"change"}]},imageUrl:"",imgw:0,imgh:0}},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){return this.ruleForm2.file=t,this.imageUrl=URL.createObjectURL(t),!1},submitForm:function(t){var e=new FormData;e.append("image",this.ruleForm2.file),e.append("user",this.ruleForm2.username),e.append("pass",this.ruleForm2.pass),b.registerUser(e).then(function(t){alert(t.status)})},gotoLogin:function(){this.$router.push({path:"/login"})}}},Q=Y,V=(i("8c81"),Object(l["a"])(Q,G,J,!1,null,"0f2f4a64",null)),X=V.exports;r["default"].use(h["a"]);var Z=new h["a"]({routes:[{path:"/",name:"index",component:_,children:[{path:"",component:k},{path:"/view",component:T}]},{path:"/login",name:"login",component:z},{path:"/register",name:"register",component:X}]});r["default"].use(o.a),r["default"].config.productionTip=!1,new r["default"]({router:Z,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var r=i("5e27"),s=i.n(r);s.a},"5e27":function(t,e,i){},"62e6":function(t,e,i){},"69b5":function(t,e,i){},"8c81":function(t,e,i){"use strict";var r=i("134c"),s=i.n(r);s.a},9238:function(t,e,i){"use strict";var r=i("cc54"),s=i.n(r);s.a},"92af":function(t,e,i){"use strict";var r=i("a78f"),s=i.n(r);s.a},"93a8":function(t,e,i){"use strict";var r=i("62e6"),s=i.n(r);s.a},a78f:function(t,e,i){},c932:function(t,e,i){},cc07:function(t,e,i){"use strict";var r=i("69b5"),s=i.n(r);s.a},cc54:function(t,e,i){}});
//# sourceMappingURL=index.75373949.js.map